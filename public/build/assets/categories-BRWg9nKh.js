import{r as c,V as f,y as v}from"./app-Cmxi_hcm.js";function b(){const l=c([]),i=c([]),n=c({name:""}),u=v(),r=c({}),o=c(!1),s=f("$swal"),g=async(a=1,e="",t="",p="",d="created_at",y="asc")=>{axios.get("/api/categories?page="+a+"&search_id="+e+"&search_title="+t+"&search_global="+p+"&order_column="+d+"&order_direction="+y).then(C=>{l.value=C.data})};return{categoryList:i,categories:l,category:n,getCategories:g,getCategoryList:async()=>{o.value=!0,axios.get("/api/category-list").then(a=>{i.value=a.data.data}).finally(()=>o.value=!1)},getCategory:a=>{axios.get(`/api/categories/${a}`).then(e=>{e.data.data?(n.value=e.data.data,console.log("Categoría cargada:",n.value)):(console.warn("La categoría no se encontró."),s({icon:"warning",title:"Categoría no encontrada",text:"No se pudo cargar la categoría.",customClass:{popup:"swal"}}))}).catch(e=>{var t;console.error("Error al obtener la categoría:",e),((t=e.response)==null?void 0:t.status)===404?s({icon:"error",title:"Error 404",text:"La categoría solicitada no existe.",customClass:{popup:"swal"}}):s({icon:"error",title:"Error",text:"No se pudo obtener la categoría.",customClass:{popup:"swal"}})})},storeCategory:async a=>{o.value||(o.value=!0,r.value={},axios.post("/api/categories",a).then(e=>{u.push({name:"categories.index"}),s({icon:"success",title:"Category saved successfully",customClass:{popup:"swal"}})}).catch(e=>{var t;(t=e.response)!=null&&t.data&&(r.value=e.response.data.errors)}).finally(()=>o.value=!1))},updateCategory:async a=>{o.value||(o.value=!0,r.value={},axios.put("/api/categories/"+a.id,a).then(e=>{u.push({name:"categories.index"}),s({icon:"success",title:"Category updated successfully",customClass:{popup:"swal"}})}).catch(e=>{var t;(t=e.response)!=null&&t.data&&(r.value=e.response.data.errors)}).finally(()=>o.value=!1))},deleteCategory:async a=>{s({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(e=>{e.isConfirmed&&axios.delete("/api/categories/"+a).then(t=>{g(),s({icon:"success",title:"Category deleted successfully",customClass:{popup:"swal"}}),console.log(t)}).catch(t=>{s({icon:"error",title:"Something went wrong",customClass:{popup:"swal"}}),console.log(response)})})},validationErrors:r,isLoading:o}}export{b as u};
