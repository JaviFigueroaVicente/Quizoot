import{r as R,J as k,a as C,d as i,i as a,l as u,e as c,R as p,f as t,t as d,q as f,b as E,H as D,y as F,h as n}from"./app-Cmxi_hcm.js";import{s as I,c as M,b as U,a as g,V as A}from"./index.esm-BhpYNWYs.js";import{e as S}from"./yup-locales.esm-CWkDNdp4.js";import{D as q}from"./DropZone-QYNoPNpN.js";import{u as N}from"./forms-BzG83gw_.js";import{u as O}from"./categories-BRWg9nKh.js";import{_ as B}from"./_plugin-vue_export-helper-DlAUqK2U.js";const T={class:"outer-wrapper"},$={class:"main-container equal-container mb-3 mt-3"},Z={class:"container left-container"},j={class:"input-form mb-5 mt-5"},H={key:0,class:"text-danger"},J={class:"input-form mb-5"},P={key:0,class:"text-danger"},z={class:"mb-4"},G={key:0,class:"text-danger"},K={class:"container right-container"},Q={class:"mb-3 mt-5"},W=["src"],X={key:1,src:"/images/placeholder.jpg",alt:"Placeholder",class:"form-image"},Y={class:"form-button-wrapper"},ee={__name:"Edit",setup(oe){const{getForm:_,updateForm:b,formulario:o,getFormCategories:v}=N(),{categoryList:y,getCategoryList:h}=O(),V=F(),w=C();I(S);const s=R({});o.value={name:"",description:"",thumbnail:null,category_id:[]};const x=M().shape({name:g().required("El nombre es obligatorio"),description:g().required("La descripción es obligatoria"),category_id:U().min(1,"Debe seleccionar al menos una categoría")});k(async()=>{await h();const l=w.params.id;if(l){const e=await _(l);o.value=e;const m=await v(l);o.value.category_id=m}});const L=async()=>{try{await x.validate(o.value,{abortEarly:!1}),await b(o.value),V.push({name:"mis-formularios.index"})}catch(l){l instanceof A?(s.value={},l.inner.forEach(e=>{s.value[e.path]=e.message})):console.error(l)}};return(l,e)=>{const m=E("MultiSelect");return n(),i("div",T,[e[7]||(e[7]=a("h1",null,"EDITAR FORMULARIO",-1)),a("div",$,[a("div",Z,[a("div",j,[u(a("input",{class:"form-control editable-title align-left",id:"name",placeholder:"","onUpdate:modelValue":e[0]||(e[0]=r=>t(o).name=r)},null,512),[[p,t(o).name]]),e[4]||(e[4]=a("label",{for:"form-label name"},"Nombre del formulario",-1)),s.value.name?(n(),i("small",H,d(s.value.name),1)):c("",!0)]),a("div",J,[u(a("input",{class:"form-control editable-description align-left",id:"description",placeholder:"","onUpdate:modelValue":e[1]||(e[1]=r=>t(o).description=r)},null,512),[[p,t(o).description]]),e[5]||(e[5]=a("label",{for:"form-label description"},"Descripción del formulario",-1)),s.value.description?(n(),i("small",P,d(s.value.description),1)):c("",!0)]),a("div",z,[e[6]||(e[6]=a("label",{class:"label",for:"category"},"Categorías:",-1)),f(m,{modelValue:t(o).category_id,"onUpdate:modelValue":e[2]||(e[2]=r=>t(o).category_id=r),options:t(y),display:"chip",optionLabel:"name",optionValue:"id",placeholder:"Seleccione nuevas categorías",maxSelectedLabels:3,class:"w-full md:w-80 select"},null,8,["modelValue","options"]),s.value.category_id?(n(),i("small",G,d(s.value.category_id),1)):c("",!0)])]),a("div",K,[a("div",Q,[t(o)&&t(o).media&&t(o).media.length>0?(n(),i("img",{key:0,src:t(o).media[0].original_url,alt:"Imagen del formulario",class:"form-image"},null,8,W)):(n(),i("img",X))]),f(q,{modelValue:t(o).thumbnail,"onUpdate:modelValue":e[3]||(e[3]=r=>t(o).thumbnail=r)},null,8,["modelValue"])])]),a("div",Y,[a("button",{type:"submit",class:"btn btn-custom mt-2 mb-5",onClick:D(L,["prevent"])},"ACTUALIZAR FORMULARIO")])])}}},me=B(ee,[["__scopeId","data-v-5ac2f43e"]]);export{me as default};
