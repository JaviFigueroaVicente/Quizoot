import{r as c,y as f,V as m}from"./app-Cmxi_hcm.js";function _(){const u=c([]),i=c({name:""}),l=f(),o=c({}),a=c(!1),n=m("$swal"),d=async(e=1,t="",s="",r="",p="created_at",h="desc")=>{axios.get("/api/users?page="+e+"&search_id="+t+"&search_title="+s+"&search_global="+r+"&order_column="+p+"&order_direction="+h).then(U=>{u.value=U.data})};return{users:u,user:i,getUsers:d,getUsersWithTasks:async()=>{axios.get("/api/userswithtasks").then(e=>{u.value=e.data})},getUser:async e=>{axios.get("/api/users/"+e).then(t=>{i.value=t.data.data,console.log(i.value)})},createUserDB:async e=>axios.put("/api/users/db/create/"+e),deleteUserDB:async e=>axios.put("/api/users/db/delete/"+e),changeUserPasswordDB:async e=>axios.put("/api/users/db/password/"+e),createUserProceduredDB:async e=>axios.put("/api/users/db/procedure/"+e),storeUser:async e=>{if(a.value)return;a.value=!0,o.value={};let t=new FormData;for(let s in e)e.hasOwnProperty(s)&&t.append(s,e[s]);axios.post("/api/users",t).then(s=>{l.push({name:"users.index"}),n({icon:"success",title:"User saved successfully",customClass:{popup:"swal"}})}).catch(s=>{var r;(r=s.response)!=null&&r.data&&(o.value=s.response.data.errors)}).finally(()=>a.value=!1)},updateUser:async e=>{a.value||(a.value=!0,o.value={},axios.put("/api/users/"+e.id,e).then(t=>{l.push({name:"users.index"}),n({icon:"success",title:"User updated successfully",customClass:{popup:"swal"}})}).catch(t=>{var s;(s=t.response)!=null&&s.data&&(o.value=t.response.data.errors)}).finally(()=>a.value=!1))},deleteUser:async(e,t)=>{n({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(s=>{s.isConfirmed&&axios.delete("/api/users/"+e).then(r=>{u.value.data.splice(t,1),d(),l.push({name:"users.index"}),n({icon:"success",title:"User deleted successfully",customClass:{popup:"swal"}})}).catch(r=>{n({icon:"error",title:"Something went wrong",customClass:{popup:"swal"}})})})},validationErrors:o,isLoading:a}}export{_ as u};
