import{L as C,a8 as y,r as f,J as M,a as N,a1 as T,d as n,i as e,H as U,q as K,l as g,R as j,t as h,f as r,F as A,m as H,k as J,b as z,v as G,h as l,K as I}from"./app-Cmxi_hcm.js";import{u as O}from"./roles-DWmrCW-o.js";import{d as k,u as Q,a as W,r as X,m as Y}from"./rules-Cr5SfRfu.js";const Z={class:"row justify-content-center my-5"},$={class:"col"},ee={class:"card border-0 shadow-sm"},se={class:"card-body"},te={class:"mb-3"},ae={class:"form-outline w-25"},oe={class:"text-danger mt-1"},ie={class:"text-danger mt-1"},ne={class:"mt-4"},re=["disabled"],le={class:""},de={key:0},me={key:1},fe={__name:"Edit",async setup(ce){let t,d;k("required",X),k("min",Y);const V={name:"required|min:3"},{validate:P,errors:F,resetForm:ue}=Q({validationSchema:V}),{value:L}=W("name",null,{initialValue:""}),{role:b,updateRolePermissions:R,getRole:q,validationErrors:D,isLoading:u}=O(),o=C({name:L}),x=N();let p=([t,d]=y(()=>axios.get("/api/permissions/")),t=await t,d(),t),E=p.data.data;p=([t,d]=y(()=>axios.get("/api/role-permissions/"+x.params.id)),t=await t,d(),t);let _=p.data.data,w=B(E,_);f(w),f(_);const v=f([w,_]);function S(){P().then(m=>{if(m.valid){let s=v.value[1].map(i=>i.id);R(o,s)}})}M(()=>{q(x.params.id)}),T(()=>{o.id=b.value.id,o.name=b.value.name});function B(m,s){return m.filter(i=>!s.some(c=>i.id===c.id))}return(m,s)=>{var c;const i=z("PickList");return l(),n("div",Z,[e("div",$,[e("div",ee,[e("div",se,[e("form",{onSubmit:U(S,["prevent"])},[e("div",te,[s[2]||(s[2]=e("label",{for:"post-title",class:"form-label"}," Title ",-1)),e("div",ae,[g(e("input",{"onUpdate:modelValue":s[0]||(s[0]=a=>o.name=a),id:"post-title",type:"text",class:"form-control"},null,512),[[j,o.name]])]),e("div",oe,h(r(F).name),1),e("div",ie,[(l(!0),n(A,null,H((c=r(D))==null?void 0:c.name,a=>(l(),n("div",null,h(a),1))),256))])]),K(i,{modelValue:v.value,"onUpdate:modelValue":s[1]||(s[1]=a=>v.value=a),dataKey:"id",breakpoint:"1400px",striped:"",pt:{root:{class:"picklist"}}},{option:J(({option:a})=>[I(h(a.name),1)]),_:1},8,["modelValue"]),e("div",ne,[e("button",{disabled:r(u),class:"btn btn-primary"},[g(e("div",le,null,512),[[G,r(u)]]),r(u)?(l(),n("span",de,"Processing...")):(l(),n("span",me,"Update"))],8,re)])],32)])])])])}}};export{fe as default};
