import{r as P,J as q,a as x,d as u,i as t,l as f,e as i,R as v,f as d,t as m,F as _,m as U,H as $,y as C,b as R,h as n,q as D}from"./app-Cmxi_hcm.js";import{s as N,c as h,b as A,a as b,e as B,V as F}from"./index.esm-BhpYNWYs.js";import{e as I}from"./yup-locales.esm-CWkDNdp4.js";import{u as L}from"./preguntas-wEJ3Kd-z.js";const M={class:"container"},S={class:"row"},T={key:0,class:"text-danger"},j={class:"row card justify-center gap-4"},z=["for"],G=["name","onUpdate:modelValue"],H={key:0,class:"text-danger"},J={key:0,class:"text-danger"},Y={__name:"Edit",setup(K){N(I);const y=C(),g=x(),{getPregunta:V,pregunta:l,updatePregunta:k}=L(),w=h().shape({pregunta:b().required("Pregunta es un campo requerido"),respuestas:A().of(h().shape({respuesta:b().required("La respuesta es requerida"),correcta:B()})).min(4,"Debe haber al menos 4 respuestas").test("una-correcta","Solo una respuesta puede ser correcta",function(r){return r.filter(c=>c.correcta).length===1})}),a=P({}),E=async()=>{try{await w.validate(l.value,{abortEarly:!1}),await k(l.value),y.push({name:"questions.index"})}catch(r){r instanceof F?(a.value={},r.inner.forEach(e=>{a.value[e.path]=e.message})):console.error(r)}};return q(()=>{console.log(g.params.id),V(g.params.id)}),(r,e)=>{const c=R("Checkbox");return n(),u(_,null,[e[2]||(e[2]=t("h2",null,"EDITAR PREGUNTA",-1)),t("div",M,[t("div",S,[e[1]||(e[1]=t("label",{for:"pregunta"},"Pregunta",-1)),f(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>d(l).pregunta=o),placeholder:"Escibre tu pregunta",class:"w-full md:w-80"},null,512),[[v,d(l).pregunta]]),a.value.pregunta?(n(),u("small",T,m(a.value.pregunta),1)):i("",!0)]),t("div",j,[(n(!0),u(_,null,U(d(l).respuestas,(o,s)=>(n(),u("div",{class:"flex items-center gap-2",key:s},[D(c,{modelValue:o.correcta,"onUpdate:modelValue":p=>o.correcta=p,inputId:"respuesta"+(s+1),name:"pregunta.respuestas."+s+".correcta",binary:!0,"false-value":0,"true-value":1},null,8,["modelValue","onUpdate:modelValue","inputId","name"]),t("label",{for:"respuesta"+(s+1)},null,8,z),f(t("input",{name:"respuesta"+(s+1),"onUpdate:modelValue":p=>o.respuesta=p,type:"text"},null,8,G),[[v,o.respuesta]]),a.value[`respuestas[${s}].respuesta`]?(n(),u("small",H,m(a.value[`respuestas[${s}].respuesta`]),1)):i("",!0)]))),128)),a.value.respuestas?(n(),u("small",J,m(a.value.respuestas),1)):i("",!0)]),t("button",{type:"submit",class:"btn btn-primary button button-action mt-2",onClick:$(E,["prevent"])},"Actualizar Pregunta")])],64)}}};export{Y as default};
