import{u as B,r as T,J as V,d,i as c,q as e,k as o,f as m,b as n,W as D,y as M,h as l,K as b,t as g,j as U,e as w,H as z}from"./app-Cmxi_hcm.js";import{u as R}from"./forms-BzG83gw_.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";const j={class:"grid"},q={class:"col-12"},A={class:"card card-admin"},K={key:0},S={key:1},E=["src"],H={key:1},J={__name:"index",setup(O){M();const{formularios:p,getForms:y,deleteForm:v}=R(),{can:h}=B(),i=T();V(()=>{y().then(()=>{console.log("Datos de formularios:",p.value)})});const _=()=>{i.value={global:{value:null,matchMode:D.CONTAINS}}};return _(),(k,t)=>{const C=n("InputIcon"),I=n("InputText"),x=n("IconField"),r=n("Button"),u=n("router-link"),F=n("Toolbar"),s=n("Column"),N=n("DataTable");return l(),d("div",j,[c("div",q,[c("div",A,[e(N,{class:"datatable-admin",filters:i.value,"onUpdate:filters":t[3]||(t[3]=a=>i.value=a),value:m(p),paginator:"",rows:5,globalFilterFields:["id","name","description","user_id","created_at"],stripedRows:"",dataKey:"id",size:"small"},{header:o(()=>[e(F,{"pt:root:class":"toolbar-table"},{start:o(()=>[e(x,null,{default:o(()=>[e(C,{class:"pi pi-search"}),e(I,{modelValue:i.value.global.value,"onUpdate:modelValue":t[0]||(t[0]=a=>i.value.global.value=a),placeholder:"Buscar"},null,8,["modelValue"])]),_:1}),e(r,{type:"button",icon:"pi pi-filter-slash",label:"Clear",class:"ml-1",outlined:"",onClick:t[1]||(t[1]=a=>_())}),e(r,{type:"button",icon:"pi pi-refresh",class:"h-100 ml-1",outlined:"",onClick:t[2]||(t[2]=a=>k.getUsers())}),e(u,{to:{name:"formularios.create"},class:"flex align-items-center"},{default:o(()=>t[4]||(t[4]=[c("button",{type:"button",class:"btn btn-primary button button-action"},"Crear formulario",-1)])),_:1,__:[4]})]),_:1})]),empty:o(()=>t[5]||(t[5]=[b(" No se encuentran formularios ")])),default:o(()=>[e(s,{field:"id",header:"ID",sortable:""}),e(s,{field:"name",header:"Nombre",sortable:""}),e(s,{field:"description",header:"Descripcion"}),e(s,{field:"preguntas_count",header:"NÂº Preguntas",sortable:""},{body:o(a=>[b(g(a.data.preguntas_count??0),1)]),_:1}),e(s,{field:"categoria_id",header:"Categoria",sortable:""},{body:o(a=>[a.data.categories&&a.data.categories.length>0?(l(),d("span",K,g(a.data.categories.map(f=>f.nombre).join(", ")),1)):(l(),d("span",S,"No asignada"))]),_:1}),e(s,{field:"user_id",header:"Id Usuario",sortable:""}),e(s,{field:"original_image",header:"Foto"},{body:o(a=>[a.data.original_image?(l(),d("img",{key:0,src:a.data.original_image,alt:"Imagen",class:"thumbnail"},null,8,E)):(l(),d("span",H,"No hay imagen"))]),_:1}),e(s,{field:"created_at",header:"Creado el",sortable:""}),e(s,null,{body:o(a=>[e(u,{to:{name:"formulariosRespondidos.indexByForm",params:{id:a.data.id}}},{default:o(()=>t[6]||(t[6]=[c("p",{style:{color:"blueviolet","margin-left":"15px"}},"Ver Usuarios que han respondido",-1)])),_:2,__:[6]},1032,["to"])]),_:1}),e(s,{class:"pe-0 me-0 icon-column-2"},{body:o(a=>[e(u,{to:{name:"formularios.asignar-preguntas",params:{id:a.data.id}}},{default:o(()=>[e(r,{icon:"pi pi-plus",severity:"help",size:"small",class:"mr-1"})]),_:2},1032,["to"]),m(h)("user-edit")?(l(),U(u,{key:0,to:{name:"formularios.edit",params:{id:a.data.id}}},{default:o(()=>[e(r,{icon:"pi pi-pencil",severity:"info",size:"small",class:"mr-1"})]),_:2},1032,["to"])):w("",!0),e(r,{icon:"pi pi-trash",severity:"danger",onClick:z(f=>m(v)(a.data.id),["prevent"]),size:"small"},null,8,["onClick"])]),_:1})]),_:1},8,["filters","value"])])])])}}},Q=$(J,[["__scopeId","data-v-8c214d2d"]]);export{Q as default};
