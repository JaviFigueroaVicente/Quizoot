import{p as Te,r as z,s as ge,J as Re,a as Fe,Z as Be,w as Ee,d as P,f as W,N as Se,i as m,e as ce,t as q,q as ue,b as ye,F as Oe,m as Ne,k as we,V as Ae,y as Le,_ as Ve,h as I,n as De}from"./app-Cmxi_hcm.js";import{u as je}from"./forms-BzG83gw_.js";import{u as Ue}from"./formularios_respondidos-TQ5z_ssG.js";import{_ as ze}from"./_plugin-vue_export-helper-DlAUqK2U.js";var de={};(function he(w,F,C,D){var B=!!(w.Worker&&w.Blob&&w.Promise&&w.OffscreenCanvas&&w.OffscreenCanvasRenderingContext2D&&w.HTMLCanvasElement&&w.HTMLCanvasElement.prototype.transferControlToOffscreen&&w.URL&&w.URL.createObjectURL),K=typeof Path2D=="function"&&typeof DOMMatrix=="function",re=function(){if(!w.OffscreenCanvas)return!1;var a=new OffscreenCanvas(1,1),e=a.getContext("2d");e.fillRect(0,0,1,1);var r=a.transferToImageBitmap();try{e.createPattern(r,"no-repeat")}catch{return!1}return!0}();function H(){}function Z(a){var e=F.exports.Promise,r=e!==void 0?e:w.Promise;return typeof r=="function"?new r(a):(a(H,H),null)}var E=function(a,e){return{transform:function(r){if(a)return r;if(e.has(r))return e.get(r);var n=new OffscreenCanvas(r.width,r.height),o=n.getContext("2d");return o.drawImage(r,0,0),e.set(r,n),n},clear:function(){e.clear()}}}(re,new Map),G=function(){var a=Math.floor(16.666666666666668),e,r,n={},o=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(e=function(s){var l=Math.random();return n[l]=requestAnimationFrame(function t(i){o===i||o+a-1<i?(o=i,delete n[l],s()):n[l]=requestAnimationFrame(t)}),l},r=function(s){n[s]&&cancelAnimationFrame(n[s])}):(e=function(s){return setTimeout(s,a)},r=function(s){return clearTimeout(s)}),{frame:e,cancel:r}}(),te=function(){var a,e,r={};function n(o){function s(l,t){o.postMessage({options:l||{},callback:t})}o.init=function(t){var i=t.transferControlToOffscreen();o.postMessage({canvas:i},[i])},o.fire=function(t,i,d){if(e)return s(t,null),e;var f=Math.random().toString(36).slice(2);return e=Z(function(h){function v(y){y.data.callback===f&&(delete r[f],o.removeEventListener("message",v),e=null,E.clear(),d(),h())}o.addEventListener("message",v),s(t,f),r[f]=v.bind(null,{data:{callback:f}})}),e},o.reset=function(){o.postMessage({reset:!0});for(var t in r)r[t](),delete r[t]}}return function(){if(a)return a;if(!C&&B){var o=["var CONFETTI, SIZE = {}, module = {};","("+he.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{a=new Worker(URL.createObjectURL(new Blob([o])))}catch(s){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",s),null}n(a)}return a}}(),T={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function O(a,e){return e?e(a):a}function M(a){return a!=null}function u(a,e,r){return O(a&&M(a[e])?a[e]:T[e],r)}function $(a){return a<0?0:Math.floor(a)}function N(a,e){return Math.floor(Math.random()*(e-a))+a}function A(a){return parseInt(a,16)}function j(a){return a.map(ne)}function ne(a){var e=String(a).replace(/[^0-9a-f]/gi,"");return e.length<6&&(e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),{r:A(e.substring(0,2)),g:A(e.substring(2,4)),b:A(e.substring(4,6))}}function oe(a){var e=u(a,"origin",Object);return e.x=u(e,"x",Number),e.y=u(e,"y",Number),e}function S(a){a.width=document.documentElement.clientWidth,a.height=document.documentElement.clientHeight}function se(a){var e=a.getBoundingClientRect();a.width=e.width,a.height=e.height}function Q(a){var e=document.createElement("canvas");return e.style.position="fixed",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=a,e}function X(a,e,r,n,o,s,l,t,i){a.save(),a.translate(e,r),a.rotate(s),a.scale(n,o),a.arc(0,0,1,l,t,i),a.restore()}function J(a){var e=a.angle*(Math.PI/180),r=a.spread*(Math.PI/180);return{x:a.x,y:a.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:a.startVelocity*.5+Math.random()*a.startVelocity,angle2D:-e+(.5*r-Math.random()*r),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:a.color,shape:a.shape,tick:0,totalTicks:a.ticks,decay:a.decay,drift:a.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:a.gravity*3,ovalScalar:.6,scalar:a.scalar,flat:a.flat}}function L(a,e){e.x+=Math.cos(e.angle2D)*e.velocity+e.drift,e.y+=Math.sin(e.angle2D)*e.velocity+e.gravity,e.velocity*=e.decay,e.flat?(e.wobble=0,e.wobbleX=e.x+10*e.scalar,e.wobbleY=e.y+10*e.scalar,e.tiltSin=0,e.tiltCos=0,e.random=1):(e.wobble+=e.wobbleSpeed,e.wobbleX=e.x+10*e.scalar*Math.cos(e.wobble),e.wobbleY=e.y+10*e.scalar*Math.sin(e.wobble),e.tiltAngle+=.1,e.tiltSin=Math.sin(e.tiltAngle),e.tiltCos=Math.cos(e.tiltAngle),e.random=Math.random()+2);var r=e.tick++/e.totalTicks,n=e.x+e.random*e.tiltCos,o=e.y+e.random*e.tiltSin,s=e.wobbleX+e.random*e.tiltCos,l=e.wobbleY+e.random*e.tiltSin;if(a.fillStyle="rgba("+e.color.r+", "+e.color.g+", "+e.color.b+", "+(1-r)+")",a.beginPath(),K&&e.shape.type==="path"&&typeof e.shape.path=="string"&&Array.isArray(e.shape.matrix))a.fill(Y(e.shape.path,e.shape.matrix,e.x,e.y,Math.abs(s-n)*.1,Math.abs(l-o)*.1,Math.PI/10*e.wobble));else if(e.shape.type==="bitmap"){var t=Math.PI/10*e.wobble,i=Math.abs(s-n)*.1,d=Math.abs(l-o)*.1,f=e.shape.bitmap.width*e.scalar,h=e.shape.bitmap.height*e.scalar,v=new DOMMatrix([Math.cos(t)*i,Math.sin(t)*i,-Math.sin(t)*d,Math.cos(t)*d,e.x,e.y]);v.multiplySelf(new DOMMatrix(e.shape.matrix));var y=a.createPattern(E.transform(e.shape.bitmap),"no-repeat");y.setTransform(v),a.globalAlpha=1-r,a.fillStyle=y,a.fillRect(e.x-f/2,e.y-h/2,f,h),a.globalAlpha=1}else if(e.shape==="circle")a.ellipse?a.ellipse(e.x,e.y,Math.abs(s-n)*e.ovalScalar,Math.abs(l-o)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI):X(a,e.x,e.y,Math.abs(s-n)*e.ovalScalar,Math.abs(l-o)*e.ovalScalar,Math.PI/10*e.wobble,0,2*Math.PI);else if(e.shape==="star")for(var c=Math.PI/2*3,b=4*e.scalar,_=8*e.scalar,k=e.x,R=e.y,V=5,x=Math.PI/V;V--;)k=e.x+Math.cos(c)*_,R=e.y+Math.sin(c)*_,a.lineTo(k,R),c+=x,k=e.x+Math.cos(c)*b,R=e.y+Math.sin(c)*b,a.lineTo(k,R),c+=x;else a.moveTo(Math.floor(e.x),Math.floor(e.y)),a.lineTo(Math.floor(e.wobbleX),Math.floor(o)),a.lineTo(Math.floor(s),Math.floor(l)),a.lineTo(Math.floor(n),Math.floor(e.wobbleY));return a.closePath(),a.fill(),e.tick<e.totalTicks}function le(a,e,r,n,o){var s=e.slice(),l=a.getContext("2d"),t,i,d=Z(function(f){function h(){t=i=null,l.clearRect(0,0,n.width,n.height),E.clear(),o(),f()}function v(){C&&!(n.width===D.width&&n.height===D.height)&&(n.width=a.width=D.width,n.height=a.height=D.height),!n.width&&!n.height&&(r(a),n.width=a.width,n.height=a.height),l.clearRect(0,0,n.width,n.height),s=s.filter(function(y){return L(l,y)}),s.length?t=G.frame(v):h()}t=G.frame(v),i=h});return{addFettis:function(f){return s=s.concat(f),d},canvas:a,promise:d,reset:function(){t&&G.cancel(t),i&&i()}}}function p(a,e){var r=!a,n=!!u(e||{},"resize"),o=!1,s=u(e,"disableForReducedMotion",Boolean),l=B&&!!u(e||{},"useWorker"),t=l?te():null,i=r?S:se,d=a&&t?!!a.__confetti_initialized:!1,f=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,h;function v(c,b,_){for(var k=u(c,"particleCount",$),R=u(c,"angle",Number),V=u(c,"spread",Number),x=u(c,"startVelocity",Number),be=u(c,"decay",Number),Me=u(c,"gravity",Number),Ce=u(c,"drift",Number),fe=u(c,"colors",j),_e=u(c,"ticks",Number),ve=u(c,"shapes"),ke=u(c,"scalar"),xe=!!u(c,"flat"),me=oe(c),pe=k,ie=[],Pe=a.width*me.x,Ie=a.height*me.y;pe--;)ie.push(J({x:Pe,y:Ie,angle:R,spread:V,startVelocity:x,color:fe[pe%fe.length],shape:ve[N(0,ve.length)],ticks:_e,decay:be,gravity:Me,drift:Ce,scalar:ke,flat:xe}));return h?h.addFettis(ie):(h=le(a,ie,i,b,_),h.promise)}function y(c){var b=s||u(c,"disableForReducedMotion",Boolean),_=u(c,"zIndex",Number);if(b&&f)return Z(function(x){x()});r&&h?a=h.canvas:r&&!a&&(a=Q(_),document.body.appendChild(a)),n&&!d&&i(a);var k={width:a.width,height:a.height};t&&!d&&t.init(a),d=!0,t&&(a.__confetti_initialized=!0);function R(){if(t){var x={getBoundingClientRect:function(){if(!r)return a.getBoundingClientRect()}};i(x),t.postMessage({resize:{width:x.width,height:x.height}});return}k.width=k.height=null}function V(){h=null,n&&(o=!1,w.removeEventListener("resize",R)),r&&a&&(document.body.contains(a)&&document.body.removeChild(a),a=null,d=!1)}return n&&!o&&(o=!0,w.addEventListener("resize",R,!1)),t?t.fire(c,k,V):v(c,k,V)}return y.reset=function(){t&&t.reset(),h&&h.reset()},y}var g;function U(){return g||(g=p(null,{useWorker:!0,resize:!0})),g}function Y(a,e,r,n,o,s,l){var t=new Path2D(a),i=new Path2D;i.addPath(t,new DOMMatrix(e));var d=new Path2D;return d.addPath(i,new DOMMatrix([Math.cos(l)*o,Math.sin(l)*o,-Math.sin(l)*s,Math.cos(l)*s,r,n])),d}function ee(a){if(!K)throw new Error("path confetti are not supported in this browser");var e,r;typeof a=="string"?e=a:(e=a.path,r=a.matrix);var n=new Path2D(e),o=document.createElement("canvas"),s=o.getContext("2d");if(!r){for(var l=1e3,t=l,i=l,d=0,f=0,h,v,y=0;y<l;y+=2)for(var c=0;c<l;c+=2)s.isPointInPath(n,y,c,"nonzero")&&(t=Math.min(t,y),i=Math.min(i,c),d=Math.max(d,y),f=Math.max(f,c));h=d-t,v=f-i;var b=10,_=Math.min(b/h,b/v);r=[_,0,0,_,-Math.round(h/2+t)*_,-Math.round(v/2+i)*_]}return{type:"path",path:e,matrix:r}}function ae(a){var e,r=1,n="#000000",o='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof a=="string"?e=a:(e=a.text,r="scalar"in a?a.scalar:r,o="fontFamily"in a?a.fontFamily:o,n="color"in a?a.color:n);var s=10*r,l=""+s+"px "+o,t=new OffscreenCanvas(s,s),i=t.getContext("2d");i.font=l;var d=i.measureText(e),f=Math.ceil(d.actualBoundingBoxRight+d.actualBoundingBoxLeft),h=Math.ceil(d.actualBoundingBoxAscent+d.actualBoundingBoxDescent),v=2,y=d.actualBoundingBoxLeft+v,c=d.actualBoundingBoxAscent+v;f+=v+v,h+=v+v,t=new OffscreenCanvas(f,h),i=t.getContext("2d"),i.font=l,i.fillStyle=n,i.fillText(e,y,c);var b=1/r;return{type:"bitmap",bitmap:t.transferToImageBitmap(),matrix:[b,0,0,b,-f*b/2,-h*b/2]}}F.exports=function(){return U().apply(this,arguments)},F.exports.reset=function(){U().reset()},F.exports.create=p,F.exports.shapeFromPath=ee,F.exports.shapeFromText=ae})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),de,!1);const We=de.exports;de.exports.create;const qe={key:0,class:"container-cargando"},He={key:1,class:"container"},Ze={class:"text-section"},Ge={class:"top-preguntas"},$e={class:"text-section-interior"},Je={class:"header-container"},Ke={class:"white-section"},Qe={key:0},Xe={key:0,class:"buttons-section"},Ye=["onClick"],ea={key:2,class:"container"},aa={class:"container-puntuacion-final"},ra={key:0,id:"confetti",class:"confetti-canvas"},ta={key:1},na={key:2},oa={class:"text-center"},sa={class:"puntuacion-buttons"},la={__name:"index",setup(he){const w=Te(),F=Le(),C=Fe(),{getForm:D,selectedPreguntas:B,getPreguntasSinRespuesta:K,verificarRespuesta:re,isLoading:H}=je(),{storeFormulariosRespondidos:Z,formularioRespondido:E,getScoreAnterior:G,updateFormularioRespondido:te,scoreAnterior:T}=Ue(),O=z(0),M=z(0);let u=z(0);const $=Ae("$swal"),N=z(0),A=z(),j=z(!1),ne=ge(()=>B.value.length),oe=async()=>{await Ve();const p=document.getElementById("confetti");p.confetti=p.confetti||We.create(p,{resize:!0}),p.confetti({particleCount:150,spread:70,origin:{y:1},ticks:300,gravity:.1})},S=ge(()=>B.value&&B.value.length>0?B.value[O.value]:null),se=async p=>{if(L(),S.value){const g=await re(S.value,p);if(g){const U=u.value*10;M.value+=U}X(g)}},Q=()=>{O.value<B.value.length-1?(O.value++,J()):(L(),j.value=!0,console.log(M.value),console.log(T.value),M.value>T.value?(T.value!==0?(E.value.formulario_id=C.params.id,E.value.user_id=w.user.id,E.value.score=M.value,te(E.value),j.value=!0):(Z(C.params.id,M.value),console.log(C.params.id,M.value)),oe()):j.value=!0)},X=p=>{N.value=0,u.value=100,p?$({icon:"success",title:"Has acertado!",showConfirmButton:!1,timer:3e3,allowOutsideClick:!1,customClass:{popup:"swal"}}).then(()=>{Q()}):$({icon:"error",title:"Has fallado...",showConfirmButton:!1,timer:3e3,allowOutsideClick:!1,customClass:{popup:"swal"}}).then(()=>{Q()})},J=()=>{A.value=setInterval(()=>{let p=N.value+1;if(p>=100){p=100,u.value=0,L(),X(!1);return}N.value=p,u.value=100-p},300)},L=()=>{clearInterval(A.value),A.value=null},le=()=>{L(),$({title:"Seguro que quieres abandonar?",text:"PerderÃ¡s tu puntuaciÃ³n actual!",icon:"warning",showCancelButton:!0,confirmButtonText:"SÃ­, quiero abandonar!",confirmButtonColor:"#ef4444",allowOutsideClick:!1,reverseButtons:!0,customClass:{popup:"swal"}}).then(p=>{p.isConfirmed?F.push({name:"forms.details",params:{id:C.params.id}}):J()})};return Re(()=>{D(C.params.id),K(C.params.id).then(()=>{O.value=0,N.value=0,u.value=100}),G(w.user.id,C.params.id)}),Be(()=>{L()}),Ee(H,p=>{p||J()}),(p,g)=>{const U=ye("ProgressBar"),Y=ye("router-link");return W(H)?(I(),P("section",qe,g[0]||(g[0]=[Se('<div class="cargando" data-v-0136800f><svg xmlns="http://www.w3.org/2000/svg" height="200px" width="200px" viewBox="0 0 200 200" class="pencil" data-v-0136800f><defs data-v-0136800f><clipPath id="pencil-eraser" data-v-0136800f><rect height="30" width="30" ry="5" rx="5" data-v-0136800f></rect></clipPath></defs><circle transform="rotate(-113,100,100)" stroke-linecap="round" stroke-dashoffset="439.82" stroke-dasharray="439.82 439.82" stroke-width="2" stroke="white" fill="none" r="70" class="pencil__stroke" data-v-0136800f></circle><g transform="translate(100,100)" class="pencil__rotate" data-v-0136800f><g fill="none" data-v-0136800f><circle transform="rotate(-90)" stroke-dashoffset="402" stroke-dasharray="402.12 402.12" stroke-width="30" stroke="#402462" r="64" class="pencil__body1" data-v-0136800f></circle><circle transform="rotate(-90)" stroke-dashoffset="465" stroke-dasharray="464.96 464.96" stroke-width="10" stroke="#874eca" r="74" class="pencil__body2" data-v-0136800f></circle><circle transform="rotate(-90)" stroke-dashoffset="339" stroke-dasharray="339.29 339.29" stroke-width="10" stroke="#874eca" r="54" class="pencil__body3" data-v-0136800f></circle></g><g transform="rotate(-90) translate(49,0)" class="pencil__eraser" data-v-0136800f><g class="pencil__eraser-skew" data-v-0136800f><rect height="30" width="30" ry="5" rx="5" fill="#874eca" data-v-0136800f></rect><rect height="20" width="30" fill="hsl(223,10%,90%)" data-v-0136800f></rect><rect height="20" width="15" fill="hsl(223,10%,70%)" data-v-0136800f></rect><rect height="20" width="5" fill="hsl(223,10%,80%)" data-v-0136800f></rect><rect height="2" width="30" y="6" fill="hsla(223,10%,10%,0.2)" data-v-0136800f></rect><rect height="2" width="30" y="13" fill="hsla(223,10%,10%,0.2)" data-v-0136800f></rect></g></g><g transform="rotate(-90) translate(49,-30)" class="pencil__point" data-v-0136800f><polygon points="15 0,30 30,0 30" fill="hsl(33,90%,70%)" data-v-0136800f></polygon><polygon points="15 0,6 30,0 30" fill="hsl(33,90%,50%)" data-v-0136800f></polygon><polygon points="15 0,20 10,10 10" fill="hsl(223,10%,10%)" data-v-0136800f></polygon></g></g></svg><h3 data-v-0136800f>CARGANDO</h3></div>',1)]))):j.value?(I(),P("section",ea,[g[5]||(g[5]=m("div",{class:"video-fondo-div"},[m("video",{class:"video-fondo",src:"/images/Home/fondo3.mp4",autoplay:"true",muted:"true",loop:"true"})],-1)),m("div",aa,[W(T)!==null&&M.value>W(T)?(I(),P("canvas",ra)):ce("",!0),W(T)!==null&&M.value>W(T)?(I(),P("div",ta,g[2]||(g[2]=[m("img",{class:"nuevo-record",src:"/images/Icons/Corona.webp",alt:""},null,-1),m("h2",{class:"text-center"},"Â¡NUEVO RÃ‰CORD!",-1)]))):(I(),P("div",na)),m("div",null,[m("p",oa,"Tu puntuaciÃ³n es de: "+q(M.value)+" pts",1)]),m("div",sa,[ue(Y,{to:{name:"rankings.details",params:{id:W(C).params.id}}},{default:we(()=>g[3]||(g[3]=[m("button",null,"VER RANKING",-1)])),_:1,__:[3]},8,["to"]),ue(Y,{to:"/"},{default:we(()=>g[4]||(g[4]=[m("button",{class:"mb-5"},"INICIO",-1)])),_:1,__:[4]})])])])):(I(),P("section",He,[g[1]||(g[1]=m("div",{class:"video-fondo-div"},[m("video",{class:"video-fondo",src:"/images/Home/fondo3.mp4",autoplay:"true",muted:"true",loop:"true"})],-1)),m("section",Ze,[m("div",Ge,[m("p",null,q(O.value+1)+" / "+q(ne.value),1)]),m("div",$e,[m("section",Je,[m("div",null,[ue(U,{value:N.value,class:"tiempoPregunta"},null,8,["value"])])]),m("section",Ke,[S.value?(I(),P("h4",Qe,q(S.value.pregunta),1)):ce("",!0),m("p",null,"PuntuaciÃ³n: "+q(M.value)+" pts",1)])])]),S.value?(I(),P("section",Xe,[(I(!0),P(Oe,null,Ne(S.value.respuestas,(ee,ae)=>(I(),P("button",{key:ae,class:De(["kahoot-button",["red","blue","green","yellow"][ae%4]]),onClick:a=>se(ee)},q(ee),11,Ye))),128))])):ce("",!0),m("section",{class:"exit-div"},[m("button",{onClick:le,class:"exit-button"},"Abandonar")])]))}}},ha=ze(la,[["__scopeId","data-v-0136800f"]]);export{ha as default};
