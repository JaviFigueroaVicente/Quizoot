import{r as k,J as R,a as U,d as n,i as t,l as f,e as p,R as g,f as m,t as d,F as _,m as P,H as q,y as A,b as C,h as l,q as $}from"./app-Cmxi_hcm.js";import{s as I,c as v,b as N,a as b,e as T,V as D}from"./index.esm-BhpYNWYs.js";import{e as L}from"./yup-locales.esm-CWkDNdp4.js";import{u as B}from"./preguntas-wEJ3Kd-z.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const M={class:"container card flex flex-column align-items-center mb-5"},S={class:"row"},G={class:"input-form w-full"},j={key:0,class:"text-danger"},H={class:"row justify-center gap-4"},J={class:"flex align-items-center w-full"},Z={class:"input-form w-full ml-2"},z=["name","onUpdate:modelValue"],K=["for"],O={key:0,class:"text-danger"},Q={key:0,class:"text-danger"},W={__name:"Edit",setup(X){const s=k({});I(L);const h=A(),y=U(),{getPregunta:V,pregunta:u,updatePregunta:w}=B(),E=v().shape({pregunta:b().required("Pregunta es un campo requerido"),respuestas:N().of(v().shape({respuesta:b().required("La respuesta es requerida"),correcta:T()})).min(4,"Debe haber al menos 4 respuestas").test("una-correcta","Solo una respuesta puede ser correcta",function(r){return r.filter(c=>c.correcta).length===1})}),x=async()=>{try{await E.validate(u.value,{abortEarly:!1}),await w(u.value),h.push({name:"questions.index"})}catch(r){r instanceof D?(s.value={},r.inner.forEach(e=>{s.value[e.path]=e.message})):console.error(r)}};return R(()=>{V(y.params.id)}),(r,e)=>{const c=C("Checkbox");return l(),n(_,null,[e[4]||(e[4]=t("h1",null,"EDITAR PREGUNTA",-1)),t("div",M,[t("div",S,[e[2]||(e[2]=t("span",null,"Pregunta:",-1)),t("div",G,[f(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>m(u).pregunta=o),placeholder:"",class:"form-control w-full md:w-80"},null,512),[[g,m(u).pregunta]]),e[1]||(e[1]=t("label",{for:"pregunta",class:"form-label"},"Escribe tu pregunta",-1)),s.value.pregunta?(l(),n("small",j,d(s.value.pregunta),1)):p("",!0)])]),t("div",H,[e[3]||(e[3]=t("span",null,"Respuestas:",-1)),(l(!0),n(_,null,P(m(u).respuestas,(o,a)=>(l(),n("div",{class:"flex align-items-center gap-2",key:a},[t("div",J,[$(c,{modelValue:o.correcta,"onUpdate:modelValue":i=>o.correcta=i,inputId:"respuesta"+(a+1),name:"pregunta.respuestas."+a+".correcta",binary:!0,"false-value":0,"true-value":1},null,8,["modelValue","onUpdate:modelValue","inputId","name"]),t("div",Z,[f(t("input",{name:"respuesta"+(a+1),"onUpdate:modelValue":i=>o.respuesta=i,type:"text",class:"form-control"},null,8,z),[[g,o.respuesta]]),t("label",{for:"respuesta"+(a+1),class:"form-label"},"Escribe tu respuesta",8,K)])]),s.value[`respuestas[${a}].respuesta`]?(l(),n("small",O,d(s.value[`respuestas[${a}].respuesta`]),1)):p("",!0)]))),128)),s.value.respuestas?(l(),n("small",Q,d(s.value.respuestas),1)):p("",!0)])]),t("button",{type:"submit",class:"btn btn-primary button button-action mt-5 my-5",onClick:q(x,["prevent"])},"ACTUALIZAR PREGUNTA")],64)}}},re=F(W,[["__scopeId","data-v-ac801162"]]);export{re as default};
