import{r as l,y as w,V as C}from"./app-Cmxi_hcm.js";function b(){const u=l([]),c=l({name:""}),p=l([]),d=l([]),i=w(),o=l({}),a=l(!1),n=C("$swal"),f=async(e=1,s="",t="",r="",y="created_at",R="desc")=>{axios.get("/api/roles?page="+e+"&search_id="+s+"&search_title="+t+"&search_global="+r+"&order_column="+y+"&order_direction="+R).then(x=>{u.value=x.data})},v=async e=>{axios.get("/api/roles/"+e).then(s=>{c.value=s.data.data})},h=async e=>{axios.get("/api/role-permissions/"+e).then(s=>{d.value=s.data.data})},g=async e=>{a.value||(a.value=!0,o.value={},axios.post("/api/roles",e).then(s=>{i.push({name:"roles.index"}),n({icon:"success",title:"Role saved successfully",customClass:{popup:"swal"}})}).catch(s=>{var t;(t=s.response)!=null&&t.data&&(o.value=s.response.data.errors)}).finally(()=>a.value=!1))},m=async e=>{a.value||(a.value=!0,o.value={},axios.put("/api/roles/"+e.id,e).then(s=>{i.push({name:"roles.index"}),n({icon:"success",title:"Role updated successfully",customClass:{popup:"swal"}})}).catch(s=>{var t;(t=s.response)!=null&&t.data&&(o.value=s.response.data.errors)}).finally(()=>a.value=!1))};return{roles:u,role:c,roleList:p,getRoleList:async()=>{axios.get("/api/role-list").then(e=>{p.value=e.data.data})},getRoles:f,rolePermissionList:d,getRolePermissions:h,getRole:v,storeRole:g,updateRole:m,updateRolePermissions:async(e,s)=>{a.value||(a.value=!0,o.value={},axios.put("/api/role-permissions",{permissions:JSON.stringify(s),role_id:e.id}).catch(t=>{var r;(r=t.response)!=null&&r.data&&(o.value=t.response.data.errors)}).finally(()=>{a.value=!1,m(e)}))},deleteRole:async e=>{n({title:"Are you sure?",text:"You won't be able to revert this action!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",confirmButtonColor:"#ef4444",timer:2e4,timerProgressBar:!0,reverseButtons:!0}).then(s=>{s.isConfirmed&&axios.delete("/api/roles/"+e).then(t=>{f(),i.push({name:"roles.index"}),n({icon:"success",title:"Role deleted successfully",customClass:{popup:"swal"}})}).catch(t=>{n({icon:"error",title:"Something went wrong",customClass:{popup:"swal"}})})})},validationErrors:o,isLoading:a}}export{b as u};
