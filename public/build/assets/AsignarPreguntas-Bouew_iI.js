import{r as v,J as E,y as B,d as U,i as a,q as t,k as s,f as g,X as V,b as r,H as $,F as D,W as G,V as M,h as K,K as c}from"./app-Cmxi_hcm.js";import{u as O}from"./preguntas-wEJ3Kd-z.js";import{u as z}from"./forms-BzG83gw_.js";import{c as j,b as q,d as H,V as J}from"./index.esm-BhpYNWYs.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";const W={class:"grid"},X={class:"col-6"},Q={class:"card"},Y={class:"search-and-filters-container flex md:flex-row"},Z={class:"icon-field-container flex align-items-center"},ee={class:"buttons-container flex gap-2"},te={class:"col-6"},ae={class:"card"},se={class:"card-header bg-transparent ps-0 pe-0"},oe={class:"button-asignar"},ne={__name:"AsignarPreguntas",setup(le){const _=M("$swal"),p=v({}),m=B(),{preguntas:C,getPreguntas:y}=O(),{getForm:P,getFormPreguntas:I,selectedPreguntas:l,asignarPreguntas:h}=z(),u=v(),A=j().shape({pregunta_ids:q().of(H()).min(1,"Debe seleccionar al menos una pregunta")});E(()=>{y(),P(m.currentRoute.value.params.id),I(m.currentRoute.value.params.id)});const f=()=>{u.value={global:{value:null,matchMode:G.CONTAINS}}};f();const N=o=>{l.value=l.value.filter(e=>e.id!==o.id)},k=()=>{l.value=[]},w=async()=>{try{await A.validate({pregunta_ids:l.value.map(o=>o.id)},{abortEarly:!1}),await h(),m.push({name:"formularios.index"})}catch(o){o instanceof J?(p.value={},o.inner.forEach(e=>{p.value[e.path]=e.message})):console.error(o),_({icon:"error",title:p.value.pregunta_ids,showConfirmButton:!0,allowOutsideClick:!1})}};return(o,e)=>{const x=r("InputIcon"),F=r("InputText"),R=r("IconField"),d=r("Button"),S=r("router-link"),T=r("Toolbar"),i=r("Column"),b=r("DataTable");return K(),U(D,null,[e[13]||(e[13]=a("h1",null,"ASIGNAR PREGUNTAS",-1)),a("div",W,[a("div",X,[a("div",Q,[e[7]||(e[7]=a("div",{class:"card-header bg-transparent ps-0 pe-0"},[a("h5",{class:"float-start mb-0"},"BUSCAR PREGUNTAS")],-1)),t(b,{filters:u.value,"onUpdate:filters":e[3]||(e[3]=n=>u.value=n),size:"normal",selection:g(l),"onUpdate:selection":e[4]||(e[4]=n=>V(l)?l.value=n:null),value:g(C).data,paginator:"",rows:5,globalFilterFields:["id","pregunta","created_at"],stripedRows:"",dataKey:"id"},{header:s(()=>[t(T,{"pt:root:class":"toolbar-table"},{start:s(()=>[a("div",Y,[a("div",Z,[t(R,null,{default:s(()=>[t(x,{class:"pi pi-search"}),t(F,{modelValue:u.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=n=>u.value.global.value=n),placeholder:"Buscar"},null,8,["modelValue"])]),_:1})]),a("div",ee,[t(d,{type:"button",icon:"pi pi-filter-slash",label:"Clear",outlined:"",onClick:e[1]||(e[1]=n=>f())}),t(d,{type:"button",icon:"pi pi-refresh",outlined:"",onClick:e[2]||(e[2]=n=>o.getUserPreguntas())}),t(S,{to:{name:"mis-preguntas.create"},class:"flex align-items-center"},{default:s(()=>e[5]||(e[5]=[a("button",{type:"button",class:"btn btn-primary button button-action"},"Crear pregunta",-1)])),_:1,__:[5]})])])]),_:1})]),empty:s(()=>e[6]||(e[6]=[c(" No hay preguntas. ")])),default:s(()=>[t(i,{selectionMode:"multiple",value:"preguntas.data",dataKey:"id"}),t(i,{field:"id",header:"ID",sortable:""}),t(i,{field:"pregunta",header:"Pregunta",sortable:""}),t(i,{field:"created_at",header:"Creado el",sortable:""})]),_:1},8,["filters","selection","value"])])]),a("div",te,[a("div",ae,[a("div",se,[e[9]||(e[9]=a("h5",{class:"float-start mb-0"},"PREGUNTAS SELECCIONADAS",-1)),t(d,{type:"button",class:"p-button-danger limpiar-button",onClick:k},{default:s(()=>e[8]||(e[8]=[c("Borrar todas")])),_:1,__:[8]})]),e[12]||(e[12]=a("hr",null,null,-1)),t(b,{size:"normal",value:g(l),paginator:"",rows:5},{loading:s(()=>e[10]||(e[10]=[c(" Cargando preguntas seleccionadas... ")])),empty:s(()=>e[11]||(e[11]=[c(" No hay preguntas seleccionadas ")])),default:s(()=>[t(i,null,{body:s(n=>[t(d,{icon:"pi pi-minus",class:"p-button-danger",onClick:re=>N(n.data)},null,8,["onClick"])]),_:1}),t(i,{field:"id",header:"ID"}),t(i,{field:"pregunta",header:"Pregunta"})]),_:1},8,["value"])])])]),a("div",oe,[a("button",{type:"submit",class:"btn btn-custom mt-2",onClick:$(w,["prevent"])},"ASIGNAR PREGUNTAS")])],64)}}},me=L(ne,[["__scopeId","data-v-13218cec"]]);export{me as default};
