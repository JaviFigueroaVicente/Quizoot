import{r as u,s as B,J as L,d as n,f as c,i as e,q as l,b,H as w,n as k,F as f,m as x,P as R,h as a,t as p,k as z}from"./app-Cmxi_hcm.js";import{u as M}from"./categories-BRWg9nKh.js";import{u as j}from"./forms-BzG83gw_.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={key:0},I={class:"container pb-4"},K={class:"mt-4 mb-4"},V={key:1},$={class:"container pb-4"},q={class:"dropdown"},D={class:"dropdown-menu","aria-labelledby":"dropdownMenuButton"},E=["onClick"],H={class:"row row-cols-1 g-4 mt-3"},J={class:"card d-flex flex-row align-items-center p-3 horizontal-card"},T=["src"],O={class:"d-flex justify-content-between w-100"},Q={class:"mb-0 fw-bold me-3"},U={class:"d-flex align-items-center"},W={key:0,class:"badge me-3"},X={key:1,class:"badge me-3"},Y={class:"mb-0 text-muted small"},Z={class:"mt-4 pb-4"},ee={__name:"index",setup(se){const{categoryList:y,getCategoryList:C}=M(),{formularios:_,getForms:g,isLoading:S}=j(),d=u(0),i=u(3),m=u(null),F=B(()=>{const t=d.value*i.value;return _.value.slice(t,t+i.value)}),N=t=>{d.value=t.page,i.value=t.rows};L(()=>{C(),g()});const h=(t=null)=>{console.log("Categoría seleccionada:",t),m.value=t,d.value=0,g(t)};return(t,o)=>{const r=b("Skeleton"),P=b("router-link");return c(S)?(a(),n("div",G,[o[1]||(o[1]=e("div",{class:"text-center py-3 pt-5 pb-5 title"},[e("h1",{class:"fw-bold"},"RANKINGS")],-1)),e("div",I,[l(r,{class:"skeleton dropdown mb-3",height:"30px",width:"125px"}),l(r,{class:"mt-5 skeleton",height:"15rem"}),l(r,{class:"mt-6 skeleton",height:"15rem"}),l(r,{class:"mt-6 skeleton",height:"15rem"}),e("div",K,[l(r,{height:"50px",class:"skeleton"})])])])):(a(),n("div",V,[o[4]||(o[4]=e("div",{class:"text-center py-3 pt-5 pb-5 title"},[e("h1",{class:"fw-bold"},"RANKINGS")],-1)),e("div",$,[e("div",q,[o[2]||(o[2]=e("button",{class:"btn btn-light me-2 btn-hover-lila dropdown-toggle",type:"button",id:"dropdownMenuButton","data-bs-toggle":"dropdown","aria-expanded":"false"}," + ",-1)),e("ul",D,[e("li",null,[e("a",{class:k(["dropdown-item",{"active-category":m.value===null}]),href:"#",onClick:o[0]||(o[0]=w(s=>h(),["prevent"]))}," Todos ",2)]),(a(!0),n(f,null,x(c(y),s=>(a(),n("li",{key:s.id},[e("a",{class:k(["dropdown-item",{"active-category":m.value===s.id}]),href:"#",onClick:w(v=>h(s.id),["prevent"])},p(s.name),11,E)]))),128))]),o[3]||(o[3]=e("span",null,"Categorías",-1))]),e("div",H,[(a(!0),n(f,null,x(F.value,s=>(a(),n("div",{class:"col",key:s.id},[l(P,{to:{name:"rankings.details",params:{id:s.id}}},{default:z(()=>[e("div",J,[e("img",{src:s.original_image?s.original_image:"/images/placeholder.jpg",alt:"Formulario",class:"form-image-horizontal me-5"},null,8,T),e("div",O,[e("h5",Q,p(s.name),1),e("div",U,[s.categories&&s.categories.length?(a(),n("span",W,p(s.categories.map(v=>v.nombre).join(", ")),1)):(a(),n("span",X,"Sin categoría")),e("p",Y,"Respuestas: "+p(s.formularios_respondidos_count||0),1)])])])]),_:2},1032,["to"])]))),128))]),e("div",Z,[l(c(R),{rows:i.value,totalRecords:c(_).length,pageLinkSize:2,first:d.value*i.value,onPage:N},null,8,["rows","totalRecords","first"])])])]))}}},le=A(ee,[["__scopeId","data-v-318c0168"]]);export{le as default};
