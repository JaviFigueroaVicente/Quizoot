import{r as w,d as n,i as t,l as f,e as i,R as g,f as m,t as d,F as v,m as C,H as E,y as q,b as x,h as u,q as P}from"./app-Cmxi_hcm.js";import{s as U,c as _,b as $,a as h,e as R,V as N}from"./index.esm-BhpYNWYs.js";import{e as B}from"./yup-locales.esm-CWkDNdp4.js";import{u as D}from"./preguntas-wEJ3Kd-z.js";const F={class:"container"},L={class:"row"},S={key:0,class:"text-danger"},A={class:"row card justify-center gap-4"},I=["for"],M=["name","onUpdate:modelValue"],T={key:0,class:"text-danger"},j={key:0,class:"text-danger"},O={__name:"Create",setup(G){const{storePregunta:b,pregunta:l}=D();U(B);const y=q(),V=_().shape({pregunta:h().required("Pregunta es un campo requerido"),respuestas:$().of(_().shape({respuesta:h().required("La respuesta es requerida"),correcta:R()})).min(4,"Debe haber al menos 4 respuestas").test("una-correcta","Solo una respuesta puede ser correcta",function(r){return r.filter(c=>c.correcta).length===1})}),a=w({}),k=async()=>{try{await V.validate(l.value,{abortEarly:!1}),await b(),y.push({name:"questions.index"})}catch(r){r instanceof N?(a.value={},r.inner.forEach(e=>{a.value[e.path]=e.message})):console.error(r)}};return(r,e)=>{const c=x("Checkbox");return u(),n(v,null,[e[2]||(e[2]=t("h2",null,"CREAR PREGUNTA",-1)),t("div",F,[t("div",L,[e[1]||(e[1]=t("label",{for:"pregunta"},"Pregunta",-1)),f(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=o=>m(l).pregunta=o),placeholder:"Escibre tu pregunta",class:"w-full md:w-80"},null,512),[[g,m(l).pregunta]]),a.value.pregunta?(u(),n("small",S,d(a.value.pregunta),1)):i("",!0)]),t("div",A,[(u(!0),n(v,null,C(m(l).respuestas,(o,s)=>(u(),n("div",{class:"flex items-center gap-2",key:s},[P(c,{modelValue:o.correcta,"onUpdate:modelValue":p=>o.correcta=p,inputId:"respuesta"+(s+1),name:"pregunta.respuestas."+s+".correcta",binary:!0,"false-value":0,"true-value":1},null,8,["modelValue","onUpdate:modelValue","inputId","name"]),t("label",{for:"respuesta"+(s+1)},null,8,I),f(t("input",{name:"respuesta"+(s+1),"onUpdate:modelValue":p=>o.respuesta=p,type:"text"},null,8,M),[[g,o.respuesta]]),a.value[`respuestas[${s}].respuesta`]?(u(),n("small",T,d(a.value[`respuestas[${s}].respuesta`]),1)):i("",!0)]))),128)),a.value.respuestas?(u(),n("small",j,d(a.value.respuestas),1)):i("",!0)]),t("button",{type:"submit",class:"btn btn-primary button button-action mt-2",onClick:E(k,["prevent"])},"Crear Pregunta")])],64)}}};export{O as default};
