import{r as E,J as F,a as C,d as i,i as t,f as o,q as u,e as m,l as p,R as g,t as c,b as D,H as L,F as S,y as q,h as r}from"./app-Cmxi_hcm.js";import{s as M,c as U,b as N,a as f,V as B}from"./index.esm-BhpYNWYs.js";import{e as I}from"./yup-locales.esm-CWkDNdp4.js";import{D as R}from"./DropZone-QYNoPNpN.js";import{u as $}from"./forms-BzG83gw_.js";import{u as A}from"./categories-BRWg9nKh.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";const H={class:"main-container mb-3"},J={key:0,class:"container left-container"},P={class:"mb-5"},T={key:0,class:"text-danger"},Z={class:"mb-5"},j={key:0,class:"text-danger"},G={key:0,class:"text-danger"},K=["src"],O={key:1,src:"images/placeholder.png",alt:"Placeholder",class:"form-image"},Q={key:1,class:"col-md-4 left-section"},W={__name:"Edit",setup(X){const{getForm:b,updateForm:_,formulario:a,getFormCategories:v}=$(),{categoryList:y,getCategoryList:h}=A(),s=E({});M(I);const V=q(),k=C();a.value={name:"",description:"",thumbnail:null,category_id:[]};const w=U().shape({name:f().required("El nombre es obligatorio"),description:f().required("La descripción es obligatoria"),category_id:N().min(1,"Debe seleccionar al menos una categoría")});F(async()=>{await h();const l=k.params.id;if(l){const e=await b(l);a.value=e;const d=await v(l);a.value.category_id=d}});const x=async()=>{try{await w.validate(a.value,{abortEarly:!1}),await _(a.value),V.push({name:"mis-formularios.index"})}catch(l){l instanceof B?(s.value={},l.inner.forEach(e=>{s.value[e.path]=e.message})):console.error(l)}};return(l,e)=>{const d=D("MultiSelect");return r(),i(S,null,[t("div",H,[o(a)?(r(),i("div",J,[t("div",P,[e[4]||(e[4]=t("label",{for:"name"},null,-1)),p(t("input",{class:"fw-bold editable-title align-left",id:"name",placeholder:"Introducir Aquí El Nombre  Del Formulario","onUpdate:modelValue":e[0]||(e[0]=n=>o(a).name=n)},null,512),[[g,o(a).name]]),s.value.name?(r(),i("small",T,c(s.value.name),1)):m("",!0)]),t("div",Z,[e[5]||(e[5]=t("label",{for:"description"},null,-1)),p(t("input",{class:"editable-description align-left",id:"description",placeholder:"Escribe aquí la descripción del formulario...","onUpdate:modelValue":e[1]||(e[1]=n=>o(a).description=n)},null,512),[[g,o(a).description]]),s.value.description?(r(),i("small",j,c(s.value.description),1)):m("",!0)]),u(d,{modelValue:o(a).category_id,"onUpdate:modelValue":e[2]||(e[2]=n=>o(a).category_id=n),options:o(y),display:"chip",optionLabel:"name",optionValue:"id",placeholder:"Seleccione nuevas categorías",maxSelectedLabels:3,class:"w-full md:w-80"},null,8,["modelValue","options"]),s.value.category_id?(r(),i("small",G,c(s.value.category_id),1)):m("",!0),t("div",null,[o(a)&&o(a).media&&o(a).media.length>0?(r(),i("img",{key:0,src:o(a).media[0].original_url,alt:"User image",class:"form-image"},null,8,K)):(r(),i("img",O))]),u(R,{modelValue:o(a).thumbnail,"onUpdate:modelValue":e[3]||(e[3]=n=>o(a).thumbnail=n)},null,8,["modelValue"])])):(r(),i("div",Q,e[6]||(e[6]=[t("p",null,"Cargando formulario...",-1)])))]),t("button",{type:"submit",class:"btn btn-custom mt-2",onClick:L(x,["prevent"])},"Actualizar Formulario")],64)}}},ie=z(W,[["__scopeId","data-v-9bfc3fb9"]]);export{ie as default};
